<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<style>
.box div {
   height: 200px;
   width: 680px;
}

.box .guess_box {
   width: 150px;
   height: 150px;
   float: left;
   margin: 3px;
   padding: 3px;
   background: pink;
}

img {
   width: 100%;
   height: 80%;
   border-radius: 70%;
   
}

img:hover{ 
	border: 10px solid green;	
}
</style>
<script>
   ptag2 = null;

   window.onload = function() {

      vimgs = document.getElementsByClassName('cimg');
      //vimgs = document.querySelectorAll('.cimg');

      for (i = 0; i < vimgs.length; i++) {
         vimgs[i].addEventListener('click', proc2)
      }

   }

   function proc2() {
      // this - img 를 사용할 수 있다
      if (ptag2 != null) {
         pp = document.getElementsByClassName("pp2")[0];
         guessBox = pp.parentNode;
         //console.log(g);
         // ptag의 부모요소
         guessBox.removeChild(pp);

      }

      rand = Math.floor(Math.random() * (10 - 5 + 1)) + 5;
      //textNode생성 - 할인율 : 10%
      text2 = document.createTextNode("할인율 : " + rand + "%");
      // p태그 생성
      ptag2 = document.createElement("P");
      ptag2.setAttribute('class', 'pp2');
      ptag2.appendChild(text2);

      //guess_box p태그 추가
      //img를 this 파라미터로 넘겨서 vimg변수로 받았다
      //guess_box를 검색하기 위해서 img를 기준으로 부모요소를 검색한다

      this.parentNode.appendChild(ptag2);
   }

   ///////////////////////////////////////////////////////////////////////

 
   ptag = null;

   function proc1(thiss) { //파라미터값을 받는다 변수명은 아무거나

      if (ptag != null) {
         pp = document.getElementsByClassName("pp")[0];
         guessBox = pp.parentNode;
         //console.log(g);
         // ptag의 부모요소
         guessBox.removeChild(pp);

      }

      // 랜덤발생 5~10
      //(최대값 - 최소값 + 1) +최소값
      rand = Math.floor(Math.random() * (10 - 5 + 1)) + 5;
      //textNode생성 - 할인율 : 10%
      text = document.createTextNode("할인율 : " + rand + "%");
      // p태그 생성
      ptag = document.createElement("P");
      ptag.setAttribute('class', 'pp');
      // p태그에 textNode추가한다

      ptag.appendChild(text);

      //guess_box p태그 추가
      //img를 this 파라미터로 넘겨서 vimg변수로 받았다
      //guess_box를 검색하기 위해서 img를 기준으로 부모요소를 검색한다

      thiss.parentNode.appendChild(ptag);
   }
</script>
</head>
<body>

   <div class="box">
      <h3>할인율</h3>
      이미지를 클릭하면 p태그를 생성, guess_box에 p태그를 추가 <br> &lt;p class="pp">할인율 :
      10%&lt;/p> <br> 할인율은 5 ~ 10 사이의 난수를 발생 <br> <br>
      <div id="result1">
         <div class="guess_box">
            <img onclick="proc1(this)" src="../images/딸기스무디.jpg" alt="">
         </div>
         <div class="guess_box">
            <img onclick="proc1(this)" src="../images/가구3.jpg" alt="">
         </div>
         <div class="guess_box">
            <img onclick="proc1(this)" src="../images/국화.jpg" alt="">
         </div>
         <div class="guess_box">
            <img onclick="proc1(this)" src="../images/소우주.jpg" alt="">
         </div>
         <br>
      </div>
   </div>

   <div class="box">
      <h3>할인율</h3>
      이미지를 클릭하면 p태그를 생성, guess_box에 p태그를 추가 <br> &lt;p class="pp">할인율 :
      10%&lt;/p> <br> 할인율은 5 ~ 10 사이의 난수를 발생 <br> 이벤트 일괄처리<br>
      vimgs = document.getElemnetsByClassName('cimg');<br> vimgs =
      document.querySelectorAll('.cimg');<br> for(i=0;
      i&lt;vimg.length; i++){<br>
      vimgs[i].addEventListener('click',proc2)<br> } proc2 는 새로 정의하는
      사용자 함수 proc2 함수내에서 img를 this로 사용할 수 있다 <br>
      <div id="result2">
         <div class="guess_box">
            <img class="cimg" src="../images/딸기스무디.jpg" alt="">
         </div>
         <div class="guess_box">
            <img class="cimg" src="../images/가구3.jpg" alt="">
         </div>
         <div class="guess_box">
            <img class="cimg" src="../images/국화.jpg" alt="">
         </div>
         <div class="guess_box">
            <img class="cimg" src="../images/소우주.jpg" alt="">
         </div>
         <br>
      </div>
   </div>

</body>
</html>